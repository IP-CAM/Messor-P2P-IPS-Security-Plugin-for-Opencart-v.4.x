"use strict";(self["webpackChunkfull_with_router_v0_2"]=self["webpackChunkfull_with_router_v0_2"]||[]).push([[370],{8684:function(){},1826:function(e,t,a){var n=a(6252),o=a(3577),s=a(2262),l=a(9963),u={class:"ms-form-control__field"},c={for:"request-data--path"},r={key:0,class:"ms-form-control__label"},i=["id"];t["Z"]=(0,n.aZ)({__name:"TextInputComponent",props:{title:{type:String},modelValue:{type:String,required:!0},id:{type:String,required:!0}},emits:["update:modelValue"],setup:function(e,t){var a=t.emit,_=e,p=(0,n.Fl)({get:function(){return _.modelValue},set:function(e){return a("update:modelValue",e)}});return function(t,a){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("label",c,[e.title?((0,n.wg)(),(0,n.iD)("span",r,(0,o.zw)(e.title),1)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{id:e.id,"onUpdate:modelValue":a[0]||(a[0]=function(e){return(0,s.dq)(p)?p.value=e:null}),class:"ms-form-control ms-form-control-md",type:"text"},null,8,i),[[l.nr,(0,s.SU)(p)]])])])}}})},6709:function(e,t,a){var n=a(655),o=a(6252),s=a(3577),l=a(2262),u=a(9963),c=a(7546),r=a(7061),i=a(8234),_=a(2645),p=a(4312),d=a(4938),m=a(7941),g=a(1833),f=a(6866),b=a(2180),k=a(2718),U=a(1064),h=a(7154),v=function(e){return(0,o.dD)("data-v-37893c67"),e=e(),(0,o.Cn)(),e},S={key:0},w={class:"settings-tabs-container"},D=(0,o.Uk)("Backup"),q=(0,o.Uk)("Cron"),V={key:0,class:"cron-instruction"},y={class:"cron-instruction__text"},x=v((function(){return(0,o._)("img",{width:"20",height:"20",class:"cron-instruction__copy-button-icon",src:c,alt:""},null,-1)})),Z=[x],z={class:"ms-settings-page__group"},I={class:"ms-settings-page__group-title"},R={class:"ms-settings-page__group-col"},W={class:"ms-settings-page__group-col"},C={for:"request-data--type_arch"},F={class:"ms-form-control__label"},P={class:"select_wrapper"},L=["value"],J={key:0,class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},E={key:0,class:"ms-settings-page__group"},G={class:"ms-settings-page__group-title"},H={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},j={class:"ms-page-box__item"},B={class:"ms-page-box__title"},N={class:"ms-page-box__title-icon"},Y=["src"],O={class:"ms-page-box__title-txt"},T={class:"ms-page-box__content ms-page-box__content-padding"},K={class:"ms-form"},M={class:"head-col"},A=["for"],Q=["id","value"],X=v((function(){return(0,o._)("span",{class:"ms-checkbox__icon"},null,-1)})),$={class:"ms-checkbox__txt"},ee={class:"ms-page-box__controls ms-page-box__controls-centered"},te=v((function(){return(0,o._)("span",{class:"ms-link-primary"},"/",-1)})),ae={class:"ms-settings-page__group"},ne={class:"ms-settings-page__group-title"},oe={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},se={class:(0,s.C_)(["ms-settings-page__group-col","ms-settings-page__group-col-has-hidden","ms-settings-page__group-col-fluid"])},le={class:"ms-settings-page__group-col-hidden"},ue={class:"ms-settings-page__group-box"},ce={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},re={class:"ms-settings-page__group"},ie={class:"ms-settings-page__group-title"},_e={class:"ms-settings-page__group-col"},pe={for:"request-data--type_arch"},de={class:"ms-form-control__label"},me={class:"select_wrapper"},ge=["value"],fe={key:0,class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},be={key:0,class:"ms-settings-page__group"},ke={class:"ms-settings-page__group-title"},Ue={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},he={class:"ms-page-box__item"},ve={class:"ms-page-box__title"},Se={class:"ms-page-box__title-icon"},we=["src"],De={class:"ms-page-box__title-txt"},qe={class:"ms-page-box__content ms-page-box__content-padding"},Ve={class:"ms-form"},ye={class:"head-col"},xe=["for"],Ze=["id","value"],ze=v((function(){return(0,o._)("span",{class:"ms-checkbox__icon"},null,-1)})),Ie={class:"ms-checkbox__txt"},Re={class:"ms-page-box__controls ms-page-box__controls-centered"},We=v((function(){return(0,o._)("span",{class:"ms-link-primary"},"/",-1)})),Ce={class:"ms-settings-page__group"},Fe={class:"ms-settings-page__group-title"},Pe={class:(0,s.C_)(["ms-settings-page__group-col","ms-settings-page__group-col-has-hidden","ms-settings-page__group-col-fluid"])},Le={class:"ms-settings-page__group-col-hidden"},Je={class:"ms-settings-page__group-box"},Ee={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"};t["Z"]=(0,o.aZ)({__name:"FileDatabaseBackup",setup:function(e){var t=this,c=(0,k.s)(),v=(0,U.Q)(),x=(0,l.iH)("scan"),Ge=(0,o.Fl)((function(){return"".concat(v.cron_text_path,"\n\n").concat((0,r.I)("cron_instruction_tooltip"))})),He=function(){return(0,n.mG)(t,void 0,Promise,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return[4,v.fetchInitialState()];case 1:return e.sent(),[4,c.checkLicense(v.route)];case 2:return e.sent(),[2]}}))}))},je=function(){v.requestData.tables=(0,n.ev)([],v.initialData.tables,!0),v.cronRequestData.cron_tables=(0,n.ev)([],v.initialData.tables,!0)},Be=function(){v.requestData.tables=[],v.cronRequestData.cron_tables=[]},Ne=function(){return(0,n.mG)(t,void 0,Promise,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,v.excludeFiles()];case 1:switch(t.sent(),e=v.requestData.action,e){case"download":return[3,2];case"save":return[3,4];case"email":return[3,6]}return[3,8];case 2:return[4,v.downloadBackup()];case 3:return t.sent(),[3,9];case 4:return[4,v.storeBackup()];case 5:return t.sent(),[3,9];case 6:return[4,v.sendBackup()];case 7:return t.sent(),[3,9];case 8:return[3,9];case 9:return[2]}}))}))},Ye=function(e){window.navigator.clipboard.writeText(e)},Oe=function(){return(0,n.mG)(t,void 0,Promise,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return[4,v.saveCronSettings()];case 1:return e.sent(),[2]}}))}))};return(0,o.bv)((function(){return(0,n.mG)(t,void 0,void 0,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return(0,r.g)(),[4,He()];case 1:return e.sent(),[2]}}))}))})),function(e,t){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,l.SU)(c).licenseAccepted?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(i.Z,{key:0,"api-route":(0,l.SU)(v).route},null,8,["api-route"])),(0,l.SU)(v).loading?((0,o.wg)(),(0,o.j4)(p.Z,{key:1},{default:(0,o.w5)((function(){return[(0,l.SU)(v).downloadedSize&&(0,l.SU)(v).totalFileSize?((0,o.wg)(),(0,o.iD)("span",S,(0,s.zw)((100*(0,l.SU)(v).downloadedSize/((0,l.SU)(v).totalFileSize||1)).toFixed(1))+"% ",1)):(0,o.kq)("",!0)]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)(h.Z,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(d.Z,{"image-url":a(6846),"sub-title":(0,l.SU)(r.I)("backup_descript"),title:"Backup"},{tabs:(0,o.w5)((function(){return[(0,o._)("div",w,[(0,o.Wm)(m.Z,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x.value=e}),value:"scan",name:"scan"},{default:(0,o.w5)((function(){return[D]})),_:1},8,["modelValue"]),(0,o.Wm)(m.Z,{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return x.value=e}),value:"cron",name:"cron"},{default:(0,o.w5)((function(){return[q]})),_:1},8,["modelValue"])])]})),"default-settings":(0,o.w5)((function(){return["scan"===x.value?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(g.Z,{id:"backup_path",modelValue:(0,l.SU)(v).requestData.path,"onUpdate:modelValue":t[2]||(t[2]=function(e){return(0,l.SU)(v).requestData.path=e}),title:(0,l.SU)(r.I)("backup_path")},null,8,["modelValue","title"]),(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).requestData.type_backup,"onUpdate:modelValue":t[3]||(t[3]=function(e){return(0,l.SU)(v).requestData.type_backup=e}),name:"type_backup_c_file",value:"backup_file"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_file")),1)]})),_:1},8,["modelValue"]),(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).requestData.type_backup,"onUpdate:modelValue":t[4]||(t[4]=function(e){return(0,l.SU)(v).requestData.type_backup=e}),name:"type_backup_c_db",value:"backup_db"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_database")),1)]})),_:1},8,["modelValue"]),(0,o._)("button",{class:"ms-btn-start ms-btn ms-btn-primary",type:"submit",onClick:Ne},(0,s.zw)((0,l.SU)(r.I)("backup_button_database")),1)],64)):(0,o.kq)("",!0),"cron"===x.value?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,l.SU)(v).cron_text_path?((0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("div",y,(0,s.zw)((0,l.SU)(v).cron_text_path),1),(0,o._)("button",{onClick:t[5]||(t[5]=function(e){return Ye((0,l.SU)(v).cron_text_path)})},Z),(0,o.Wm)(_.Z,{"tooltip-text":(0,l.SU)(Ge)},null,8,["tooltip-text"])])):(0,o.kq)("",!0),(0,o.Wm)(g.Z,{id:"cron_backup_path",modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_path,"onUpdate:modelValue":t[6]||(t[6]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_path=e}),title:(0,l.SU)(r.I)("backup_path")},null,8,["modelValue","title"]),(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_type_backup,"onUpdate:modelValue":t[7]||(t[7]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_type_backup=e}),name:"type_backup_file",value:"backup_file"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_file")),1)]})),_:1},8,["modelValue"]),(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_type_backup,"onUpdate:modelValue":t[8]||(t[8]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_type_backup=e}),name:"type_backup_db",value:"backup_db"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_database")),1)]})),_:1},8,["modelValue"]),(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_type_backup,"onUpdate:modelValue":t[9]||(t[9]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_type_backup=e}),name:"type_backup_file_db",value:"backup_file_db"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_file_database")),1)]})),_:1},8,["modelValue"]),(0,o._)("button",{class:"ms-btn-start ms-btn ms-btn-primary",type:"submit",onClick:Oe},(0,s.zw)((0,l.SU)(r.I)("button_save")),1)],64)):(0,o.kq)("",!0)]})),"professional-settings":(0,o.w5)((function(){return["scan"===x.value?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",z,[(0,o._)("span",I,(0,s.zw)((0,l.SU)(r.I)("backup_archiving_setting")),1),(0,o._)("div",R,[(0,o.Wm)(g.Z,{id:"backup_file_name",modelValue:(0,l.SU)(v).requestData.filename,"onUpdate:modelValue":t[10]||(t[10]=function(e){return(0,l.SU)(v).requestData.filename=e}),title:(0,l.SU)(r.I)("backup_file_name")},null,8,["modelValue","title"])]),(0,o._)("div",W,[(0,o._)("label",C,[(0,o._)("span",F,(0,s.zw)((0,l.SU)(r.I)("backup_pack")),1),(0,o._)("span",P,[(0,o.wy)((0,o._)("select",{id:"request-data--type_arch","onUpdate:modelValue":t[11]||(t[11]=function(e){return(0,l.SU)(v).requestData.type_arch=e}),class:"ms-form-control ms-form-control-md",name:"type_arch"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries((0,l.SU)(v).initialData.avaliable_arch),(function(e){var t=e[0],a=e[1];return(0,o.wg)(),(0,o.iD)("option",{key:t,value:a},(0,s.zw)(t),9,L)})),128))],512),[[u.bM,(0,l.SU)(v).requestData.type_arch]])])])]),"backup_file"===(0,l.SU)(v).requestData.type_backup?((0,o.wg)(),(0,o.iD)("div",J,[(0,o.Wm)(f.Z,{modelValue:(0,l.SU)(v).excludedFiles,"onUpdate:modelValue":t[12]||(t[12]=function(e){return(0,l.SU)(v).excludedFiles=e}),name:"EXCLUDE_FILES",type:"textarea","field-id":"excludedFiles",title:"".concat((0,l.SU)(r.I)("backup_exclude_directory"),":"),"tooltip-text":(0,l.SU)(r.I)("backup_exclude_directory")},null,8,["modelValue","title","tooltip-text"])])):(0,o.kq)("",!0)]),"backup_db"===(0,l.SU)(v).requestData.type_backup?((0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("span",G,(0,s.zw)((0,l.SU)(r.I)("backup_settings")),1),(0,o._)("div",H,[(0,o._)("div",j,[(0,o._)("div",B,[(0,o._)("span",N,[(0,o._)("img",{src:a(3828),alt:""},null,8,Y)]),(0,o._)("span",O,(0,s.zw)((0,l.SU)(r.I)("backup_select_table")),1),(0,o.Wm)(_.Z,{"tooltip-text":(0,l.SU)(r.I)("backup_i_select_table")},null,8,["tooltip-text"])]),(0,o._)("div",T,[(0,o._)("div",K,[(0,o._)("table",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(v).initialData.tables,(function(e){return(0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",M,[(0,o._)("label",{for:"".concat(e,"-table-name-checkbox"),class:"ms-checkbox"},[(0,o.wy)((0,o._)("input",{id:"".concat(e,"-table-name-checkbox"),"onUpdate:modelValue":t[13]||(t[13]=function(e){return(0,l.SU)(v).requestData.tables=e}),value:e,name:"tables[]",type:"checkbox"},null,8,Q),[[u.e8,(0,l.SU)(v).requestData.tables]]),X],8,A)]),(0,o._)("td",null,[(0,o._)("span",$,(0,s.zw)(e),1)])])})),128))])])]),(0,o._)("div",ee,[(0,o._)("button",{id:"allenable",class:"ms-link-primary",onClick:je},(0,s.zw)((0,l.SU)(r.I)("backup_select_all")),1),te,(0,o._)("button",{id:"alldisable",class:"ms-link-primary",onClick:Be},(0,s.zw)((0,l.SU)(r.I)("backup_remove_select")),1)])])])])):(0,o.kq)("",!0),(0,o._)("div",ae,[(0,o._)("span",ne,(0,s.zw)((0,l.SU)(r.I)("backup_action")),1),(0,o._)("div",oe,[(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).requestData.action,"onUpdate:modelValue":t[14]||(t[14]=function(e){return(0,l.SU)(v).requestData.action=e}),name:"action",value:"download"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_download")),1)]})),_:1},8,["modelValue"])]),(0,o._)("div",se,[(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).requestData.action,"onUpdate:modelValue":t[15]||(t[15]=function(e){return(0,l.SU)(v).requestData.action=e}),name:"action",value:"email"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_send_of_email")),1)]})),_:1},8,["modelValue"]),(0,o._)("div",le,[(0,o.Wm)(g.Z,{id:"backup_Email",modelValue:(0,l.SU)(v).requestData.email_user,"onUpdate:modelValue":t[16]||(t[16]=function(e){return(0,l.SU)(v).requestData.email_user=e}),title:"Email"},null,8,["modelValue"]),(0,o._)("div",ue,[(0,o.Wm)(g.Z,{id:"smtp_host",modelValue:(0,l.SU)(v).requestData.smtp_url,"onUpdate:modelValue":t[17]||(t[17]=function(e){return(0,l.SU)(v).requestData.smtp_url=e}),title:"SMTP Host"},null,8,["modelValue"]),(0,o.Wm)(g.Z,{id:"smtp_port",modelValue:(0,l.SU)(v).requestData.smtp_port,"onUpdate:modelValue":t[18]||(t[18]=function(e){return(0,l.SU)(v).requestData.smtp_port=e}),title:"Port"},null,8,["modelValue"]),(0,o.Wm)(g.Z,{id:"smtp_login",modelValue:(0,l.SU)(v).requestData.smtp_login,"onUpdate:modelValue":t[19]||(t[19]=function(e){return(0,l.SU)(v).requestData.smtp_login=e}),title:"Login"},null,8,["modelValue"]),(0,o.Wm)(g.Z,{id:"smtp_password",modelValue:(0,l.SU)(v).requestData.smtp_password,"onUpdate:modelValue":t[20]||(t[20]=function(e){return(0,l.SU)(v).requestData.smtp_password=e}),title:"Password"},null,8,["modelValue"])])])]),(0,o._)("div",ce,[(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).requestData.action,"onUpdate:modelValue":t[21]||(t[21]=function(e){return(0,l.SU)(v).requestData.action=e}),name:"action",value:"save"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_save_on_server")),1)]})),_:1},8,["modelValue"])])])],64)):(0,o.kq)("",!0),"cron"===x.value?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("div",re,[(0,o._)("span",ie,(0,s.zw)((0,l.SU)(r.I)("backup_archiving_setting")),1),(0,o._)("div",_e,[(0,o._)("label",pe,[(0,o._)("span",de,(0,s.zw)((0,l.SU)(r.I)("backup_pack")),1),(0,o._)("span",me,[(0,o.wy)((0,o._)("select",{id:"request-data--type_arch","onUpdate:modelValue":t[22]||(t[22]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_type_arch=e}),class:"ms-form-control ms-form-control-md",name:"type_arch"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries((0,l.SU)(v).initialData.avaliable_arch),(function(e){var t=e[0],a=e[1];return(0,o.wg)(),(0,o.iD)("option",{key:t,value:a},(0,s.zw)(t),9,ge)})),128))],512),[[u.bM,(0,l.SU)(v).cronRequestData.cron_config.cron_type_arch]])])])]),["backup_file","backup_file_db"].includes((0,l.SU)(v).cronRequestData.cron_config.cron_type_backup)?((0,o.wg)(),(0,o.iD)("div",fe,[(0,o.Wm)(f.Z,{modelValue:(0,l.SU)(v).cronRequestData.cron_exclude,"onUpdate:modelValue":t[23]||(t[23]=function(e){return(0,l.SU)(v).cronRequestData.cron_exclude=e}),name:"EXCLUDE_FILES",type:"textarea","field-id":"excludedFiles",title:"".concat((0,l.SU)(r.I)("backup_exclude_directory"),":"),"tooltip-text":(0,l.SU)(r.I)("backup_exclude_directory")},null,8,["modelValue","title","tooltip-text"])])):(0,o.kq)("",!0)]),["backup_db","backup_file_db"].includes((0,l.SU)(v).cronRequestData.cron_config.cron_type_backup)?((0,o.wg)(),(0,o.iD)("div",be,[(0,o._)("span",ke,(0,s.zw)((0,l.SU)(r.I)("backup_settings")),1),(0,o._)("div",Ue,[(0,o._)("div",he,[(0,o._)("div",ve,[(0,o._)("span",Se,[(0,o._)("img",{src:a(3828),alt:""},null,8,we)]),(0,o._)("span",De,(0,s.zw)((0,l.SU)(r.I)("backup_select_table")),1),(0,o.Wm)(_.Z,{"tooltip-text":(0,l.SU)(r.I)("backup_i_select_table")},null,8,["tooltip-text"])]),(0,o._)("div",qe,[(0,o._)("div",Ve,[(0,o._)("table",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(v).initialData.tables,(function(e){return(0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",ye,[(0,o._)("label",{for:"".concat(e,"-table-name-checkbox"),class:"ms-checkbox"},[(0,o.wy)((0,o._)("input",{id:"".concat(e,"-table-name-checkbox"),"onUpdate:modelValue":t[24]||(t[24]=function(e){return(0,l.SU)(v).cronRequestData.cron_tables=e}),value:e,name:"tables[]",type:"checkbox"},null,8,Ze),[[u.e8,(0,l.SU)(v).cronRequestData.cron_tables]]),ze],8,xe)]),(0,o._)("td",null,[(0,o._)("span",Ie,(0,s.zw)(e),1)])])})),128))])])]),(0,o._)("div",Re,[(0,o._)("button",{id:"cron-all-enable",class:"ms-link-primary",onClick:je},(0,s.zw)((0,l.SU)(r.I)("backup_select_all")),1),We,(0,o._)("button",{id:"cron-all-disable",class:"ms-link-primary",onClick:Be},(0,s.zw)((0,l.SU)(r.I)("backup_remove_select")),1)])])])])):(0,o.kq)("",!0),(0,o._)("div",Ce,[(0,o._)("span",Fe,(0,s.zw)((0,l.SU)(r.I)("backup_action")),1),(0,o._)("div",Pe,[(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_action,"onUpdate:modelValue":t[25]||(t[25]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_action=e}),name:"action",value:"email"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_send_of_email")),1)]})),_:1},8,["modelValue"]),(0,o._)("div",Le,[(0,o.Wm)(g.Z,{id:"cron_backup_Email",modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_email_user,"onUpdate:modelValue":t[26]||(t[26]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_email_user=e}),title:"Email"},null,8,["modelValue"]),(0,o._)("div",Je,[(0,o.Wm)(g.Z,{id:"cron_smtp_host",modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_url,"onUpdate:modelValue":t[27]||(t[27]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_url=e}),title:"SMTP Host"},null,8,["modelValue"]),(0,o.Wm)(g.Z,{id:"cron_smtp_port",modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_port,"onUpdate:modelValue":t[28]||(t[28]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_port=e}),title:"Port"},null,8,["modelValue"]),(0,o.Wm)(g.Z,{id:"cron_smtp_login",modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_login,"onUpdate:modelValue":t[29]||(t[29]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_login=e}),title:"Login"},null,8,["modelValue"]),(0,o.Wm)(g.Z,{id:"cron_smtp_password",modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_password,"onUpdate:modelValue":t[30]||(t[30]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_smtp_password=e}),title:"Password"},null,8,["modelValue"])])])]),(0,o._)("div",Ee,[(0,o.Wm)(m.Z,{modelValue:(0,l.SU)(v).cronRequestData.cron_config.cron_action,"onUpdate:modelValue":t[31]||(t[31]=function(e){return(0,l.SU)(v).cronRequestData.cron_config.cron_action=e}),name:"action",value:"save"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_save_on_server")),1)]})),_:1},8,["modelValue"])])])],64)):(0,o.kq)("",!0)]})),_:1},8,["image-url","sub-title"])]})),_:1}),(0,l.SU)(c).hasError?((0,o.wg)(),(0,o.j4)(b.Z,{key:2})):(0,o.kq)("",!0)],64)}}})},1064:function(e,t,a){a.d(t,{Q:function(){return c}});var n=a(655),o=a(6086),s=a(8127),l=a(3168),u="extension/messor/module/messor|FDBBApi",c=(0,o.Q_)("file-database-backup",{state:function(){return{loading:!1,initialData:{filename:"",avaliable_arch:{},tables:[],type_backup:[],exclude:[],email:"",path:"",action:"",setting:{smtp_password:"",smtp_login:"",smtp_port:"",smtp_url:""}},requestData:{path:"",action:"download",type_arch:".zip",type_backup:"backup_db",filename:"",tables:[],email_user:"",smtp_password:"",smtp_url:"",smtp_login:"",smtp_port:""},cronRequestData:{cron_config:{cron_path:"",cron_type_arch:".zip",cron_type_backup:"backup_file_db",cron_email_user:"",cron_smtp_url:"",cron_smtp_port:"",cron_smtp_login:"",cron_smtp_password:"",cron_action:"save"},cron_exclude:"",cron_database:{cron_host:"",cron_user:"",cron_password:"",cron_dbname:""},cron_tables:[]},excludedFiles:"",totalFileSize:0,downloadedSize:0,cron_text_path:""}},getters:{route:function(){return u}},actions:{fetchInitialState:function(e){var t;return void 0===e&&(e=!0),(0,n.mG)(this,void 0,Promise,(function(){var a,o,l,c,r,i,_,p;return(0,n.Jh)(this,(function(d){switch(d.label){case 0:return this.loading=e,[4,(0,s.Nv)(u,"main")];case 1:return a=d.sent(),o=a.data,l=a.status,[4,(0,s.Nv)(u,"cron_data")];case 2:return c=d.sent().data,"ok"!==l.toLocaleLowerCase()?(this.loading=!1,[2]):(this.initialData=(0,n.pi)({},o||this.initialData),r=o.filename,i=o.exclude,_=o.email,p=o.path,this.requestData=(0,n.pi)((0,n.pi)({},this.requestData),{path:p,filename:r,email_user:_,smtp_login:o.setting.smtp_login,smtp_password:o.setting.smtp_password,smtp_port:o.setting.smtp_port,smtp_url:o.setting.smtp_url}),this.cronRequestData=(0,n.pi)((0,n.pi)({},c),{cron_exclude:(null===(t=c.cron_exclude)||void 0===t?void 0:t.join("\n"))||""}),this.excludedFiles=(null===i||void 0===i?void 0:i.join("\n"))||"",this.loading=!1,[2])}}))}))},saveCronSettings:function(){return(0,n.mG)(this,void 0,Promise,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return this.loading=!0,[4,(0,s.Nv)(u,"cron_data_save",(0,n.pi)((0,n.pi)({},this.cronRequestData),{cron_exclude:this.cronRequestData.cron_exclude.split("\n")}))];case 1:return e=t.sent().data,this.cron_text_path=null===e||void 0===e?void 0:e.cron_text_path,this.loading=!1,[2]}}))}))},excludeFiles:function(){return(0,n.mG)(this,void 0,Promise,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,(0,s.Nv)(u,"exclude",{exclude:this.excludedFiles.split("\n")})];case 1:return e.sent(),this.loading=!1,[2]}}))}))},storeBackup:function(){return(0,n.mG)(this,void 0,Promise,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,(0,s.Nv)(u,"save",this.requestData)];case 1:return e.sent(),this.loading=!1,[2]}}))}))},sendBackup:function(){return(0,n.mG)(this,void 0,Promise,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,(0,s.Nv)(u,"email",this.requestData)];case 1:return e.sent(),this.loading=!1,[2]}}))}))},downloadBackup:function(){return(0,n.mG)(this,void 0,Promise,(function(){var e,t,a,o=this;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:return this.downloadedSize=0,this.totalFileSize=0,this.loading=!0,[4,(0,l.S)(u,this.requestData,(function(e){var t=e.loaded,a=e.total;o.downloadedSize=t,o.totalFileSize=a}))];case 1:return e=n.sent(),t=e.data,a=e.fileName,t&&(0,l.k)(t,a),this.loading=!1,[2]}}))}))}}})},3168:function(e,t,a){a.d(t,{S:function(){return s},k:function(){return l}});var n=a(655),o=a(8127);function s(e,t,a){return(0,n.mG)(this,void 0,Promise,(function(){var s,l,u,c,r,i,_,p;return(0,n.Jh)(this,(function(d){switch(d.label){case 0:return s={method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},[4,fetch("".concat((0,o.VN)(),"&route=").concat(e),s)];case 1:return l=d.sent(),u=l.headers.get("content-length")||"0",c=parseInt(u,10),r=0,i="",_=new Response(new ReadableStream({start:function(e){var t;return(0,n.mG)(this,void 0,void 0,(function(){var o,s,u,_,p;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:if(o=null===(t=l.body)||void 0===t?void 0:t.getReader(),!o)return[2];if(s=l.headers.get("Content-Disposition"),!s)return[2];i=s.substring(s.indexOf("filename=")+9),n.label=1;case 1:return[4,o.read()];case 2:if(u=n.sent(),_=u.done,p=u.value,_||!p)return[3,4];r+=p.byteLength,a({loaded:r,total:c}),e.enqueue(p),n.label=3;case 3:return[3,1];case 4:return e.close(),[2]}}))}))}})),p={},[4,_.blob()];case 2:return[2,(p.data=d.sent(),p.fileName=i,p)]}}))}))}var l=function(e,t){var a=document.createElement("a");document.body.appendChild(a),a.style.display="none";var n=window.URL.createObjectURL(e);a.href=n,a.download=t,a.click(),window.URL.revokeObjectURL(n)}},1833:function(e,t,a){var n=a(9400);const o=n.Z;t["Z"]=o},205:function(e,t,a){a.r(t);var n=a(2257),o=(a(7711),a(3744));const s=(0,o.Z)(n.Z,[["__scopeId","data-v-37893c67"]]);t["default"]=s},7711:function(e,t,a){a(8684)},9400:function(e,t,a){a.d(t,{Z:function(){return n.Z}});var n=a(1826)},2257:function(e,t,a){a.d(t,{Z:function(){return n.Z}});var n=a(6709)},3828:function(e,t,a){e.exports=a.p+"image/messor/icon-table.aebf25ee.svg"},6846:function(e,t,a){e.exports=a.p+"image/messor/backup.527f7cd3.png"}}]);